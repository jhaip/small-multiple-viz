<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>gh3</title>

</head>
<body>
	<h1></h1>
	<h2></h2>
	<ul></ul>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
  <script src="gh3.js"></script>
  <script>

    var k33g = new Gh3.User("jhaip")
      ,	repoTitle = $("h1")
      ,	branchTitle = $("h2")
      ,	dirContents = $("ul");

    var k33gBlog = new Gh3.Repository("small-multiple-viz", k33g);

    k33gBlog.fetch(function (err, res) {
      if(err) { throw "outch ..." }

      repoTitle.html(k33gBlog.full_name);

      k33gBlog.fetchBranches(function (err, res) {
        if(err) { throw "outch ..." }

        var master = k33gBlog.getBranchByName("master");
        branchTitle.html(master.name + " (" + master.sha + ") :");

        master.fetchContents(function (err, res) {
          if(err) { throw "outch ..." }

        //   console.log(master.getContents());
          //
        //   master.reverseContents();
          //
        //   master.eachContent(function (content) {
        //     console.log(content.name, content.type, content.size);
        //     dirContents.append('<li>'+content.name+" type : "+content.type+" size : "+content.size);
        //   });
          var f = master.getFileByName("index.html");
          f.fetchCommits(function( err, res) {
              if(err) { throw "outch ..." }

              f.reverseCommits();

              console.log(f.getCommits());

                f.eachCommit(function (content) {
                  console.log(content.date, content.message, content.url);
                  dirContents.append('<li>'+content.date+" type : "+content.message+" size : "+content.url);
                });
          });

        });

      })
    });


  </script>
</body>

</html>
